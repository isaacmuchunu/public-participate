@import 'tailwindcss';

@import 'tw-animate-css';

@source '../../vendor/laravel/framework/src/Illuminate/Pagination/resources/views/*.blade.php';
@source '../../storage/framework/views/*.php';

@custom-variant dark (&:is(.dark *));

@theme inline {
    --font-sans: Instrument Sans, ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';

    --radius-lg: var(--radius);
    --radius-md: calc(var(--radius) - 2px);
    --radius-sm: calc(var(--radius) - 4px);

    --color-background: var(--background);
    --color-foreground: var(--foreground);

    --color-card: var(--card);
    --color-card-foreground: var(--card-foreground);

    --color-popover: var(--popover);
    --color-popover-foreground: var(--popover-foreground);

    --color-primary: var(--primary);
    --color-primary-foreground: var(--primary-foreground);

    --color-secondary: var(--secondary);
    --color-secondary-foreground: var(--secondary-foreground);

    --color-muted: var(--muted);
    --color-muted-foreground: var(--muted-foreground);

    --color-accent: var(--accent);
    --color-accent-foreground: var(--accent-foreground);

    --color-destructive: var(--destructive);
    --color-destructive-foreground: var(--destructive-foreground);

    --color-info: var(--info);
    --color-info-foreground: var(--info-foreground);
    --color-info-border: var(--info-border);
    --color-info-background: var(--info-background);

    --color-border: var(--border);
    --color-input: var(--input);
    --color-ring: var(--ring);

    --color-chart-1: var(--chart-1);
    --color-chart-2: var(--chart-2);
    --color-chart-3: var(--chart-3);
    --color-chart-4: var(--chart-4);
    --color-chart-5: var(--chart-5);

    --color-sidebar: var(--sidebar-background);
    --color-sidebar-foreground: var(--sidebar-foreground);
    --color-sidebar-primary: var(--sidebar-primary);
    --color-sidebar-primary-foreground: var(--sidebar-primary-foreground);
    --color-sidebar-accent: var(--sidebar-accent);
    --color-sidebar-accent-foreground: var(--sidebar-accent-foreground);
    --color-sidebar-border: var(--sidebar-border);
    --color-sidebar-ring: var(--sidebar-ring);
}

/*
  The default border color has changed to `currentColor` in Tailwind CSS v4,
  so we've added these compatibility styles to make sure everything still
  looks the same as it did with Tailwind CSS v3.

  If we ever want to remove these styles, we need to add an explicit border
  color utility to any element that depends on these defaults.
*/
@layer base {
    *,
    ::after,
    ::before,
    ::backdrop,
    ::file-selector-button {
        border-color: var(--color-gray-200, currentColor);
    }
}

@layer utilities {
    body,
    html {
        --font-sans:
            'Instrument Sans', ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
    }

    /* Mobile-specific optimizations */
    .mobile-touch-target {
        @apply min-h-[44px] min-w-[44px];
    }

    .mobile-safe-area {
        @apply pb-safe;
    }

    /* Improved touch scrolling */
    .touch-scroll {
        -webkit-overflow-scrolling: touch;
        overscroll-behavior: contain;
    }

    /* Mobile-friendly focus states */
    .mobile-focus {
        @apply focus:ring-primary focus:outline-none focus:ring-2 focus:ring-offset-2;
    }
}

:root {
    --background: hsl(120 20% 98%);
    --foreground: hsl(120 10% 15%);
    --card: hsl(120 20% 100%);
    --card-foreground: hsl(120 10% 15%);
    --popover: hsl(120 20% 100%);
    --popover-foreground: hsl(120 10% 15%);
    --primary: hsl(120 60% 22%); /* Kenya green - improved contrast */
    --primary-foreground: hsl(0 0% 98%);
    --secondary: hsl(120 30% 92%);
    --secondary-foreground: hsl(120 10% 15%);
    --muted: hsl(120 20% 96%);
    --muted-foreground: hsl(120 10% 40%); /* Improved contrast for WCAG AA */
    --accent: hsl(120 40% 90%);
    --accent-foreground: hsl(120 10% 15%);
    --destructive: hsl(0 84.2% 60.2%);
    --destructive-foreground: hsl(0 0% 98%);
    --info: hsl(200 95% 45%);
    --info-foreground: hsl(200 30% 25%);
    --info-border: hsl(200 60% 70%);
    --info-background: hsl(200 90% 95%);
    --border: hsl(120 20% 88%);
    --input: hsl(120 20% 94%);
    --ring: hsl(120 60% 25%);
    --chart-1: hsl(120 60% 45%);
    --chart-2: hsl(173 58% 39%);
    --chart-3: hsl(197 37% 24%);
    --chart-4: hsl(43 74% 66%);
    --chart-5: hsl(27 87% 67%);
    --radius: 0.5rem;
    --sidebar-background: hsl(120 20% 98%);
    --sidebar-foreground: hsl(120 10% 26%);
    --sidebar-primary: hsl(120 60% 25%);
    --sidebar-primary-foreground: hsl(0 0% 98%);
    --sidebar-accent: hsl(120 30% 94%);
    --sidebar-accent-foreground: hsl(120 10% 30%);
    --sidebar-border: hsl(120 20% 91%);
    --sidebar-ring: hsl(120 60% 45%);
    --sidebar: hsl(120 20% 98%);

    /* Kenya flag colors */
    --kenya-black: hsl(0 0% 0%);
    --kenya-red: hsl(0 100% 50%);
    --kenya-green: hsl(120 60% 25%);
    --kenya-white: hsl(0 0% 100%);
}

.dark {
    --background: hsl(0 0% 3.9%);
    --foreground: hsl(0 0% 98%);
    --card: hsl(0 0% 3.9%);
    --card-foreground: hsl(0 0% 98%);
    --popover: hsl(0 0% 3.9%);
    --popover-foreground: hsl(0 0% 98%);
    --primary: hsl(0 0% 98%);
    --primary-foreground: hsl(0 0% 9%);
    --secondary: hsl(0 0% 14.9%);
    --secondary-foreground: hsl(0 0% 98%);
    --muted: hsl(0 0% 16.08%);
    --muted-foreground: hsl(0 0% 63.9%);
    --accent: hsl(0 0% 14.9%);
    --accent-foreground: hsl(0 0% 98%);
    --destructive: hsl(0 84% 60%);
    --destructive-foreground: hsl(0 0% 98%);
    --info: hsl(200 90% 50%);
    --info-foreground: hsl(200 90% 90%);
    --info-border: hsl(200 50% 40%);
    --info-background: hsl(200 50% 15%);
    --border: hsl(0 0% 14.9%);
    --input: hsl(0 0% 14.9%);
    --ring: hsl(0 0% 83.1%);
    --chart-1: hsl(220 70% 50%);
    --chart-2: hsl(160 60% 45%);
    --chart-3: hsl(30 80% 55%);
    --chart-4: hsl(280 65% 60%);
    --chart-5: hsl(340 75% 55%);
    --sidebar-background: hsl(0 0% 7%);
    --sidebar-foreground: hsl(0 0% 95.9%);
    --sidebar-primary: hsl(360, 100%, 100%);
    --sidebar-primary-foreground: hsl(0 0% 100%);
    --sidebar-accent: hsl(0 0% 15.9%);
    --sidebar-accent-foreground: hsl(240 4.8% 95.9%);
    --sidebar-border: hsl(0 0% 15.9%);
    --sidebar-ring: hsl(217.2 91.2% 59.8%);
    --sidebar: hsl(240 5.9% 10%);
}

@layer base {
    * {
        @apply border-border outline-ring/50;
    }
    body {
        @apply bg-background text-foreground;
    }
}

/* Enhanced focus styles for WCAG 2.1 AA compliance */
@layer utilities {
    .focus-visible-ring {
        @apply focus-visible:ring-ring focus-visible:ring-offset-background outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    }

    /* Keyboard-only focus indicator (enhanced visibility) */
    .focus-keyboard {
        @apply focus-visible:ring-ring focus-visible:ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2;
    }

    /* Strong focus for high contrast mode */
    .focus-strong {
        @apply focus-visible:outline-ring focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2;
    }
}

/* Screen reader only content */
.sr-only {
    position: absolute;
    width: 1px;
    height: 1px;
    padding: 0;
    margin: -1px;
    overflow: hidden;
    clip: rect(0, 0, 0, 0);
    white-space: nowrap;
    border-width: 0;
}

.sr-only:focus,
.sr-only:active {
    position: static;
    width: auto;
    height: auto;
    padding: inherit;
    margin: inherit;
    overflow: visible;
    clip: auto;
    white-space: normal;
}

/* High Contrast Mode Support */
.high-contrast {
    --background: hsl(0 0% 100%);
    --foreground: hsl(0 0% 0%);
    --primary: hsl(120 100% 20%);
    --primary-foreground: hsl(0 0% 100%);
    --muted-foreground: hsl(0 0% 25%);
    --border: hsl(0 0% 20%);
}

.dark.high-contrast {
    --background: hsl(0 0% 0%);
    --foreground: hsl(0 0% 100%);
    --primary: hsl(120 100% 80%);
    --primary-foreground: hsl(0 0% 0%);
    --muted-foreground: hsl(0 0% 85%);
    --border: hsl(0 0% 80%);
}

/* Reduced Motion Support */
@media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
    }
}

.reduce-motion *,
.reduce-motion *::before,
.reduce-motion *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
    scroll-behavior: auto !important;
}

/* Font Size Scaling */
.font-sm {
    font-size: 90%;
}

.font-md {
    font-size: 100%;
}

.font-lg {
    font-size: 112.5%;
}

.font-xl {
    font-size: 125%;
}

/* Link Underlining Option */
.underline-links a:not(.no-underline) {
    text-decoration: underline;
    text-decoration-thickness: 1px;
    text-underline-offset: 2px;
}

.underline-links a:hover:not(.no-underline) {
    text-decoration-thickness: 2px;
}

/* Keyboard Navigation Indicators */
:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
}

/* Enhanced interactive element accessibility */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
    outline: 2px solid hsl(var(--ring));
    outline-offset: 2px;
}

/* Skip link styling */
a.skip-link {
    position: absolute;
    top: -100px;
    left: 0;
    z-index: 9999;
    padding: 1rem 1.5rem;
    background: hsl(var(--primary));
    color: hsl(var(--primary-foreground));
    text-decoration: none;
    border-radius: 0 0 0.5rem 0;
    font-weight: 600;
    transition: top 0.2s ease;
}

a.skip-link:focus {
    top: 0;
}

/* Touch target sizing for mobile (44x44px minimum) */
@media (pointer: coarse) {
    button,
    a,
    input[type='button'],
    input[type='submit'],
    input[type='reset'] {
        min-height: 44px;
        min-width: 44px;
    }
}

.portal-toast-container {
    pointer-events: none;
    padding: 1.25rem;
}

.portal-toast {
    pointer-events: auto;
    border-radius: 1.375rem;
    background: color-mix(in srgb, var(--card) 90%, transparent);
    color: var(--foreground);
    border: 1px solid color-mix(in srgb, var(--border), transparent 35%);
    box-shadow: 0 24px 48px -28px rgba(16, 185, 129, 0.45);
    backdrop-filter: blur(14px);
}

.dark .portal-toast {
    background: color-mix(in srgb, var(--card) 75%, transparent);
    border-color: color-mix(in srgb, var(--border), transparent 45%);
    box-shadow: 0 28px 52px -28px rgba(16, 185, 129, 0.5);
}

.portal-toast__body {
    padding: 0 !important;
    margin: 0;
}

.portal-toast__content {
    display: flex;
    align-items: flex-start;
    gap: 0.875rem;
    padding: 1rem 1.25rem;
}

.portal-toast__icon {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 9999px;
    flex-shrink: 0;
}

.portal-toast__icon-mark {
    width: 1.25rem;
    height: 1.25rem;
}

.portal-toast__icon--success {
    background: rgba(16, 185, 129, 0.16);
    color: hsl(142 71% 35%);
}

.dark .portal-toast__icon--success {
    background: rgba(16, 185, 129, 0.2);
    color: hsl(142 70% 75%);
}

.portal-toast__icon--error {
    background: rgba(239, 68, 68, 0.16);
    color: hsl(0 84% 60%);
}

.dark .portal-toast__icon--error {
    background: rgba(239, 68, 68, 0.2);
    color: hsl(0 84% 85%);
}

.portal-toast__icon--info {
    background: rgba(14, 165, 233, 0.16);
    color: hsl(198 93% 50%);
}

.dark .portal-toast__icon--info {
    background: rgba(14, 165, 233, 0.2);
    color: hsl(198 93% 75%);
}

.portal-toast__icon--warning {
    background: rgba(250, 204, 21, 0.18);
    color: hsl(43 96% 40%);
}

.dark .portal-toast__icon--warning {
    background: rgba(250, 204, 21, 0.22);
    color: hsl(43 96% 70%);
}

.portal-toast__copy {
    display: flex;
    flex-direction: column;
    gap: 0.375rem;
    text-align: left;
}

.portal-toast__title {
    font-size: 0.9375rem;
    font-weight: 600;
    letter-spacing: -0.01em;
    line-height: 1.4;
}

.portal-toast__description {
    font-size: 0.8125rem;
    line-height: 1.45;
    color: var(--muted-foreground);
}

.dark .portal-toast__description {
    color: color-mix(in srgb, var(--muted-foreground), rgba(255, 255, 255, 0.65));
}

.portal-toast__progress,
.portal-toast__progress--success {
    background: rgba(16, 185, 129, 0.45);
}

.portal-toast__progress--error {
    background: rgba(239, 68, 68, 0.6);
}

.portal-toast__progress--info {
    background: rgba(14, 165, 233, 0.5);
}

.portal-toast__progress--warning {
    background: rgba(250, 204, 21, 0.6);
}
